<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>streamtools open data: boris bikes</title>
  <script src="/js/jquery.js"></script>
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
  <script src="/js/bootstrap.min.js"></script>
</head>
<body id="demos">
  <div class="jumbotron">
    <h1>Barclay's Cycle Hire</h1>
    <p id="leadPara" class="lead">
    </p>
  </div>

  <div id="reportContainer" class="container">
    <div class="row">
      <table class="table">
        <thead><th>station</th><th>available bikes</th></thead>
        <tbody id="bikesTable">
        </tbody>
      </table>
    </div>
  </div>
</body>

<div class="container" id="credits">
  <div class="attribution">Question designed by <a href="http://www.thenounproject.com/awanderlustaffair">Jessica Lock</a> from the <a href="http://www.thenounproject.com">Noun Project</a></div>
  <div class="attribution">Happy designed by <a href="http://www.thenounproject.com/tina.abihachem">Tina Abi Hachem</a> from the <a href="http://www.thenounproject.com">Noun Project</a></div>
</div>

<script>
$(document).ready(function() {
  var lostProperty = {};
  var counts = [];
  var totalAvailable = 0;
  var totalDocks = 0;

  var keys = [];

  function grabKeys() {
    $.getJSON("http://localhost:7070/blocks/20/keys", function(data) {
      keys = data.keys;
    });
  };

  function randomCategory() {
    if (keys.length > 0) {
      k = randomElement(keys);
      $.ajax({
        type: "POST",
        url: "http://localhost:7070/blocks/20/lookup", 
        data: JSON.stringify({"SubCategory": k}),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(data) {
        },
        failure: function(errMsg) {
          console.log("error looking up key: " + errMsg);
        }

      });
    } else {
      console.log("No keys yet.")
    }
  }

  var socket = new WebSocket('ws://localhost:7070/ws/unpack');
  socket.onmessage = function(event) {
    data = JSON.parse(event.data);
    $("#bikesTable").append("<tr><td>" + data.name + "</td><td>" + data.nbBikes + "</td></tr>")
  };
});
</script>

</body>
</html>
<!--
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="105px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">
              <g id="Captions">
                <text transform="matrix(1 0 0 1 87.2129 -19.5)" font-family="'Helvetica'" font-size="2.4">S&#233;vag+Tina</text>
              </g>
              <line fill="none" stroke="#000000" stroke-width="0.25" stroke-miterlimit="10" x1="100" y1="-18.346" x2="87.213" y2="-18.346"/>
              <g>
                <g>
                  <path fill="#000000" d="M60.176,10.543c0,5.623-4.551,10.178-10.175,10.178c-5.625,0-10.176-4.555-10.176-10.178    c0-5.615,4.55-10.168,10.176-10.168C55.625,0.375,60.176,4.928,60.176,10.543z"/>
                  <g>
                    <path fill="#000000" d="M85.679,8.688L61.875,32.498v62.417c0,2.812-2.285,5.085-5.093,5.085s-5.088-2.273-5.088-5.085V61.004     c0-0.935-0.757-1.696-1.694-1.696c-0.938,0-1.694,0.762-1.694,1.696v33.911c0,2.812-2.28,5.085-5.083,5.085     c-2.812,0-5.098-2.273-5.098-5.085V32.498L14.322,8.688c-1.987-1.987-1.987-5.21,0-7.197s5.21-1.987,7.192,0     c0,0,12.343,12.59,16.611,16.621c2.427,2.276,6.768,5.997,11.875,5.997c5.107,0,9.453-3.721,11.875-5.997     C66.143,14.081,78.486,1.49,78.486,1.49c1.982-1.987,5.205-1.987,7.192,0S87.666,6.7,85.679,8.688z"/>
                  </g>
                </g>
              </g>
            </svg>
-->
